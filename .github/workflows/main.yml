name: Build Mandarin WOTD JSON

on:
  schedule:
    # Runs daily at 00:05 Europe/London (i.e., 23:05 UTC or 00:05 UTC depending on DST)
    - cron: "5 0 * * *"
  workflow_dispatch: {}

permissions:
  contents: write

jobs:
  build:
    runs-on: ubuntu-latest
    env:
      # HSK CSVs (chinese,pinyin,english) — we’ll combine all levels:
      HSK_URLS: >
        https://raw.githubusercontent.com/plaktos/hsk_csv/master/hsk1.csv
        https://raw.githubusercontent.com/plaktos/hsk_csv/master/hsk2.csv
        https://raw.githubusercontent.com/plaktos/hsk_csv/master/hsk3.csv
        https://raw.githubusercontent.com/plaktos/hsk_csv/master/hsk4.csv
        https://raw.githubusercontent.com/plaktos/hsk_csv/master/hsk5.csv
        https://raw.githubusercontent.com/plaktos/hsk_csv/master/hsk6.csv
    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-python@v5
        with:
          python-version: "3.x"

      - name: Build today.json
        run: |
          python tools/build_wotd.py
